/* --- Dark Mode Variables --- */
:root {
    --bg-primary: #1e1e1e;
    --bg-secondary: #252526;
    --bg-input: #3c3c3c;
    
    --color-bubble-self: #007acc; 
    --color-bubble-other: #3c3c3c; 
    --color-system: #ff8c00; 
    --color-text: #f0f0f0;
}

html, body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-primary);
    color: var(--color-text);
    height: 100%; 
    overflow: hidden; 
    
    /* Background Image Support */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* --- SPLIT LAYOUT --- */
#app-split-container {
    display: flex;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

/* LEFT PANEL: WHITEBOARD */
#whiteboard-panel {
    flex: 1; /* Takes all available space */
    position: relative;
    background-color: #111;
    border-right: 2px solid #444;
    transition: background-color 0.3s ease;
}

#whiteboard {
    width: 100%;
    height: 100%;
    cursor: crosshair;
    display: block;
}

#wb-toolbar {
    position: absolute;
    top: 15px;
    left: 15px;
    background: rgba(30, 30, 30, 0.9);
    padding: 10px;
    border-radius: 8px;
    display: flex;
    gap: 10px;
    align-items: center;
    border: 1px solid #555;
    z-index: 10;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}

#wb-toolbar button {
    background: #444;
    border: none;
    color: white;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
}
#wb-toolbar button:hover { background: #666; }

/* RIGHT PANEL: CHAT */
#main-wrapper {
    width: 400px; /* Fixed width for chat */
    min-width: 320px;
    flex-shrink: 0; 
    display: flex;
    flex-direction: column;
    background: var(--bg-secondary);
    border-left: 1px solid #444;
    position: relative;
    height: 100%;
}

#chat-container {
    display: flex; 
    flex-direction: column; 
    height: 100%; 
    width: 100%;
}

/* --- Chat Elements Styling --- */
#username-area, #online-users-area {
    padding: 10px;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid #333;
}

#messages {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.message { display: flex; flex-direction: column; max-width: 85%; }
.message.self { align-self: flex-end; }
.message.system { align-self: center; font-size: 0.8em; color: var(--color-system); }

.bubble-content {
    background-color: var(--color-bubble-other);
    padding: 8px 12px;
    border-radius: 12px;
    word-wrap: break-word;
}
.message.self .bubble-content { background-color: var(--color-bubble-self); }

#message-input-area {
    padding: 10px;
    background-color: var(--bg-secondary);
    border-top: 1px solid #333;
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
}

#message-input {
    flex: 1;
    background-color: var(--bg-input);
    border: 1px solid #555;
    color: white;
    padding: 8px;
    border-radius: 4px;
    resize: none;
}

button {
    background-color: #007acc;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
}
button:hover { background-color: #005f9e; }

/* --- DROPDOWN MENU --- */
.dropdown { position: relative; display: inline-block; }
.dropbtn { background-color: transparent; font-size: 1.2rem; padding: 0 5px; }
.dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: var(--bg-secondary);
    min-width: 160px;
    box-shadow: 0px 8px 16px rgba(0,0,0,0.5);
    z-index: 100;
    flex-direction: column;
    border: 1px solid #555;
}
.dropdown:hover .dropdown-content { display: flex; }
.dropdown-content button {
    text-align: left;
    background: none;
    width: 100%;
    border-radius: 0;
}
.dropdown-content button:hover { background-color: #444; }

/* --- TRANSPARENT MODE & GLASSMORPHISM --- */
/* Makes the whiteboard allow the background image to show through */
body.transparent-mode #whiteboard-panel {
    background-color: rgba(0, 0, 0, 0.1); 
    backdrop-filter: blur(2px);
}

body.transparent-mode #main-wrapper {
    background-color: rgba(30, 30, 30, 0.7);
    backdrop-filter: blur(10px);
    border-left: 1px solid rgba(255, 255, 255, 0.1);
}

body.transparent-mode #username-area, 
body.transparent-mode #message-input-area,
body.transparent-mode #online-users-area {
    background-color: rgba(30, 30, 30, 0.5);
}

/* --- MOBILE RESPONSIVENESS --- */
@media (max-width: 768px) {
    #app-split-container {
        flex-direction: column;
    }
    
    #whiteboard-panel {
        height: 50vh;
        border-right: none;
        border-bottom: 2px solid #444;
    }

    #main-wrapper {
        width: 100%;
        height: 50vh;
    }
}
